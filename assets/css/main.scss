---
---

/* ========= Liquid Glass + High-Quality Blur + Heroic Transitions ========= */

/* 统一速度与曲线 */
:root{
  --ease-out: cubic-bezier(.2,.8,.2,1);
  --ease-in: cubic-bezier(.4,0,.2,1);
  --ease-smooth: cubic-bezier(.22,1,.36,1);
  --ease-bouncy: cubic-bezier(.18,.9,.22,1.08);
  --t-quick: .18s; --t-base: .34s; --t-slow: .72s;

  /* 灵动岛专用曲线与时长（新增） */
  --ease-island: cubic-bezier(.22,.9,.2,1);
  --t-island: .46s;

  /* 灵动岛专用底色（亮色更亮、深色更暗） */
  --glass-island: rgba(255,255,255,.65);    /* light 默认值，下面的媒体查询会覆盖 */
  --stroke-island: rgba(15,23,42,.10);
}
@media (prefers-color-scheme: dark){
  :root{
    --glass-island: rgba(10,14,25,.58);     /* dark：比页面其它信息&背景略暗 */
    --stroke-island: rgba(255,255,255,.12);
  }
}
@media (prefers-color-scheme: light){
  :root{
    --glass-island: rgba(255,255,255,.72);  /* light：保持更亮以突出导航 */
    --stroke-island: rgba(15,23,42,.10);
  }
}

/* 主题（暗色优先） */
:root{
  color-scheme: light dark;
  --bg:#0b1020; --text:#e7ecf3; --muted:#9db0c8;
  --glass:rgba(255,255,255,.08); --glass-strong:rgba(255,255,255,.14);
  --stroke:rgba(255,255,255,.20);
  --brand:#22d3ee; --brand-2:#60a5fa;
  --radius:18px; --shadow:0 18px 50px rgba(0,0,0,.40);
  --maxw:1120px;
}
@media (prefers-color-scheme: light){
  :root{
    --bg:#f6f8fb; --text:#0f172a; --muted:#5b708d;
    --glass:rgba(255,255,255,.65); --glass-strong:rgba(255,255,255,.82);
    --stroke:rgba(15,23,42,.10); --shadow:0 10px 34px rgba(2,6,23,.10);
  }
}

/* 基础排版 */
*{box-sizing:border-box} html,body{margin:0;padding:0}
body{
  background:var(--bg); color:var(--text);
  font:16px/1.6 system-ui,-apple-system,"SF Pro Text","Segoe UI",Roboto,Helvetica,Arial,"PingFang SC","Noto Sans SC","Microsoft YaHei",sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
a{color:var(--brand); text-decoration:none}
.container{max-width:var(--maxw); margin:auto; padding:0 22px}
.skip{position:absolute;left:-9999px}
.skip:focus{left:12px;top:12px;padding:6px 10px;background:#fff;color:#000;border-radius:8px}

/* 背景（横/竖 × 深/浅）+ 高斯模糊 + 变暗 */
.bg-img{
  position:fixed; inset:-6vmax; z-index:-3;
  background:url("/assets/img/ipados26-dark.png") center / cover fixed no-repeat;
  filter: blur(46px) brightness(.78) saturate(118%) contrast(104%);
  transform: scale(1.12); will-change: filter, transform;
}
@media (prefers-color-scheme: light){
  .bg-img{ background-image:url("/assets/img/ipados26-light.png"); filter: blur(38px) brightness(.92) saturate(112%) contrast(102%); }
}
@media (orientation: portrait) and (prefers-color-scheme: dark){
  .bg-img{ background-image:url("/assets/img/ios26-dark.png"); }
}
@media (orientation: portrait) and (prefers-color-scheme: light){
  .bg-img{ background-image:url("/assets/img/ios26-light.png"); }
}

/* 柔光罩 */
.bg-sheen{
  position:fixed; inset:-2vmax; z-index:-2; pointer-events:none;
  background:
    radial-gradient(1200px 800px at 12% 10%, rgba(255,255,255,.10), transparent 60%),
    radial-gradient(1200px 800px at 88% 18%, rgba(255,255,255,.08), transparent 60%),
    linear-gradient(to bottom, rgba(0,0,0,.35), rgba(0,0,0,.15) 30%, transparent 60%);
  mix-blend-mode: screen;
}
@media (prefers-color-scheme: light){
  .bg-sheen{
    background:
      radial-gradient(1200px 800px at 12% 10%, rgba(255,255,255,.55), transparent 60%),
      radial-gradient(1200px 800px at 88% 18%, rgba(255,255,255,.45), transparent 60%),
      linear-gradient(to bottom, rgba(255,255,255,.85), rgba(255,255,255,.55) 30%, transparent 60%);
    mix-blend-mode: normal;
  }
}

/* 液态玻璃容器（导航/卡片/页脚） */
.glass{
  background:var(--glass);
  -webkit-backdrop-filter:saturate(180%) blur(22px);
  backdrop-filter:saturate(180%) blur(22px);
  border:1px solid var(--stroke); border-radius:var(--radius); box-shadow:var(--shadow);
}

/* 灵动岛式导航：使用 clip-path inset 实现“从四周向内吸收”的收缩/展开 */
.site-header.island{
  position:sticky; top:12px; z-index:20;
  margin:12px auto; width:min(100% - 24px, var(--maxw));

  /* 专属底色：覆盖 .glass 的背景，使深色更暗、亮色更亮 */
  background: var(--glass-island);
  border-color: var(--stroke-island);

  /* 吸收式缩放：通过 inset + 圆角动态变化来“向内收缩” */
  --iInset: 0px;          /* 四周内收的量 */
  --iRadius: 18px;        /* 圆角半径 */
  clip-path: inset(var(--iInset) round var(--iRadius));
  transition:
    clip-path var(--t-island) var(--ease-island),
    transform var(--t-island) var(--ease-island),
    padding var(--t-island) var(--ease-island),
    border-radius var(--t-island) var(--ease-island),
    background .28s var(--ease-out),
    box-shadow .34s var(--ease-out);
}
/* 状态切换“流光提示” */
.site-header.island::after{
  content:""; position:absolute; inset:-2px; border-radius:inherit; pointer-events:none;
  opacity:0; transform:translateX(-120%);
  background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,.8) 50%, transparent 70%);
  filter: blur(6px); mix-blend-mode: screen;
}
@media (prefers-color-scheme: dark){
  .site-header.island::after{
    /* 深色用偏蓝的流光，降低亮度以协调整体 */
    background: linear-gradient(120deg, transparent 30%, color-mix(in oklab, #8bdcff, white 15%) 50%, transparent 70%);
    opacity:.0;
  }
}
.site-header.island.flash::after{
  animation: islandFlash .9s var(--ease-island) both;
}
@keyframes islandFlash{
  0%   {opacity:.00; transform:translateX(-120%)}
  15%  {opacity:.85}
  45%  {opacity:.45}
  100% {opacity:0;   transform:translateX(120%)}
}

.island-inner{padding:12px 14px; display:grid; gap:8px}
.island-brand{display:flex; align-items:center; justify-content:center; position:relative}
.brand{font-weight:760; letter-spacing:.3px; font-size:17px}

/* 按钮：状态提示 + 旋转过渡（hint-up/ hint-down 由 JS 切换） */
.island-toggle{
  position:absolute; right:6px; top:4px; width:28px; height:28px;
  border-radius:999px; border:1px solid var(--stroke-island);
  background:color-mix(in oklab, var(--glass-island), white 8%);
  color:var(--text);
  display:flex; align-items:center; justify-content:center;
  transition: transform .22s var(--ease-out), background .22s var(--ease-out), border-color .22s var(--ease-out), opacity .22s var(--ease-out);
}
.island-toggle:hover{ transform: scale(1.06) }
.island-toggle.hint-up{ transform: rotate(180deg) }  /* 收起态：箭头向上 */
.island-toggle.hint-down{ transform: rotate(0deg) }   /* 展开态：箭头向下 */

/* 导航显隐 */
.island-nav{display:flex; flex-wrap:wrap; gap:8px; justify-content:center; transition: opacity var(--t-base) var(--ease-out), max-height var(--t-base) var(--ease-out)}
.nav-link{
  display:inline-block; padding:8px 12px; border-radius:999px;
  border:1px solid var(--stroke);
  background: color-mix(in oklab, var(--glass), transparent 10%);
  color:var(--text);
  transition: transform var(--t-quick) var(--ease-out), background var(--t-base) var(--ease-out), border-color var(--t-base) var(--ease-out);
}
.nav-link:hover{ transform:translateY(-1px); background:var(--glass-strong)}
.nav-link.join{ background:linear-gradient(135deg, var(--brand), var(--brand-2)); color:#001018; border-color:transparent; font-weight:700}

/* 收起态：向内“吸收”到更小的胶囊，并略微上移+缩放 */
.island.compact{
  --iInset: 10px;            /* 四周向内收缩 */
  --iRadius: 22px;           /* 胶囊更圆 */
  transform:translateY(-6px) scale(.90);
}
.island.compact .island-inner{ padding:8px 12px }
.island.compact .island-nav{ opacity:0; max-height:0; overflow:hidden; pointer-events:none }

/* 展开态：回到大形态 */
.island.expanded{
  --iInset: 0px;
  --iRadius: 18px;
  transform:translateY(0) scale(1);
}
.island.expanded .island-nav{ opacity:1; max-height:160px }

/* 页面容器 */
.page{padding:28px 0 40px}

/* 首页标题“波光” */
.title-wave{
  position:relative; margin:0; line-height:1.18; font-size:clamp(28px,6vw,46px);
  background:linear-gradient(95deg, var(--brand), var(--brand-2));
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.title-wave::after{
  content:""; position:absolute; inset:-6px -10px; pointer-events:none;
  background:linear-gradient(120deg, transparent 20%, rgba(255,255,255,.65) 50%, transparent 80%);
  background-size:200% 100%; filter:blur(6px); opacity:.55; mix-blend-mode:overlay;
  animation: shimmer 3.6s linear infinite;
}
@keyframes shimmer{ 0%{background-position:-100% 0} 100%{background-position:200% 0} }

/* 公告列表标题也加“流光”（低强度、持续） */
.ann-grid .card h3 a{
  position:relative; display:inline-block;
  background:linear-gradient(95deg, var(--brand), var(--brand-2));
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.ann-grid .card h3 a::after{
  content:""; position:absolute; inset:-4px -8px; pointer-events:none;
  background:linear-gradient(120deg, transparent 35%, rgba(255,255,255,.55) 50%, transparent 65%);
  background-size:200% 100%; filter:blur(4px); opacity:.35; mix-blend-mode:overlay;
  animation: shimmer 4.6s linear infinite;
}

.hero{display:grid; gap:14px; padding:18px 0 8px}
.hero .subtitle{color:var(--muted); margin:0}
.actions{display:flex; flex-wrap:wrap; gap:12px; margin-top:8px}
.btn{
  display:inline-block; padding:10px 16px; border-radius:12px;
  border:1px solid var(--stroke); color:var(--text); background:var(--glass-strong);
  transition: transform var(--t-quick) var(--ease-out), background var(--t-base) var(--ease-out), border-color var(--t-base) var(--ease-out);
}
.btn.primary{ background:linear-gradient(135deg, var(--brand), var(--brand-2)); color:#001018; border-color:transparent; font-weight:700}
.btn:hover{ transform:translateY(-1px) }

/* 卡片栅格 + Tilt + 瀑布级联 */
.grid{display:grid; gap:18px; grid-template-columns:repeat(auto-fill, minmax(260px, 1fr)); margin:18px 0 20px}
.card{
  padding:18px; position:relative; overflow:hidden; border-radius:var(--radius);
  border:1px solid var(--stroke); background:var(--glass); box-shadow:var(--shadow);
  transform-style:preserve-3d; transition: transform .28s var(--ease-bouncy), border-color var(--t-base) var(--ease-out), background var(--t-base) var(--ease-out)
}
.card:before{
  content:""; position:absolute; inset:-40% -40% auto auto; height:160%; width:140px; transform:rotate(35deg);
  background:linear-gradient(180deg, rgba(255,255,255,.36), rgba(255,255,255,0));
  filter:blur(10px); opacity:.25; pointer-events:none;
}
.card h3{margin:0 0 6px; font-size:18px}
.card time{color:var(--muted); font-size:13px}
.card p{margin:8px 0 0; color:var(--muted)}
.card:hover{border-color:color-mix(in oklab, var(--stroke), white 20%)}

/* about/rules 卡片化 */
.section-grid{display:grid; gap:16px; grid-template-columns:repeat(auto-fill, minmax(260px, 1fr)); margin:12px 0 20px}
.section-card{padding:18px}

/* 公告详情 */
.post{padding:22px}
.post-head{position:relative; padding-bottom:14px; margin-bottom:12px; border-bottom:1px dashed var(--stroke)}
.post-title{margin:0; font-size:clamp(24px,4.8vw,38px)}
.meta{color:var(--muted); font-size:14px; margin-top:6px}
.tags em{font-style:normal; opacity:.9}
.post-body{margin-top:10px}
.post-body h2{margin-top:22px}
.post-foot{margin-top:18px}

/* 阅读进度条 */
.readbar{position:absolute; left:0; right:0; bottom:-1px; height:2px; background:transparent}
.readbar span{display:block; height:100%; width:0; background:linear-gradient(90deg, var(--brand), var(--brand-2)); border-radius:6px}

/* 页脚（上下堆叠） */
.site-footer{margin:22px auto; width:min(100% - 24px, var(--maxw)); padding:14px 16px}
.foot-col{display:flex; flex-direction:column; align-items:center; gap:6px}
.muted{color:var(--muted)}

/* 滚动入场 */
.reveal{opacity:0; transform:translateY(8px); transition:opacity .5s var(--ease-out), transform .55s var(--ease-out)}
.reveal.in{opacity:1; transform:translateY(0)}
@media (prefers-reduced-motion: reduce){ .reveal{opacity:1; transform:none} }

/* ============ 页面切换：clip-path 水滴扩散 ============ */
#xfer-root{ position:fixed; inset:0; z-index:60; pointer-events:none }
.page-xfer{
  position:fixed; inset:0; --ox:50vw; --oy:50vh; --R:0px;
  clip-path: circle(0px at var(--ox) var(--oy));
  opacity:0; background:transparent;
  transition: clip-path var(--t-slow) var(--ease-smooth), opacity .28s var(--ease-out);
  will-change: clip-path, opacity;
}
.page-xfer-img{
  position:absolute; inset:-6vmax; background-position:center; background-size:cover; background-repeat:no-repeat;
  filter: blur(42px) brightness(.82) saturate(118%) contrast(104%); transform:scale(1.10);
}
.page-xfer::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background: radial-gradient(900px 900px at var(--ox) var(--oy), rgba(255,255,255,.24) 0%, rgba(255,255,255,.12) 24%, rgba(255,255,255,0) 60%);
  mix-blend-mode:screen; opacity:.85; transition: opacity var(--t-slow) var(--ease-smooth);
}
.page-xfer.in{ clip-path: circle(var(--R) at var(--ox) var(--oy)); opacity:1; }

/* 旧页淡出 */
main.fade-out{ opacity:.05; filter: blur(8px); transition: opacity .38s var(--ease-out), filter .38s var(--ease-out) }

/* ============ 新页进场（瀑布级联） ============ */
body.pre-enter main{ opacity:0 }
body.enter main{ opacity:1 !important; filter:none !important }
body.enter .hero{ animation: enterZoom .56s var(--ease-smooth) both }
body.enter .post{ animation: enterZoom .56s var(--ease-smooth) both }
body.enter .post .post-body > *{ animation: enterRise .48s var(--ease-out) both; animation-delay: calc(.04s * var(--i, 1)) }
body.enter .grid .card{ animation: cardIn .62s var(--ease-bouncy) both; animation-delay: var(--d, 0ms) }
@keyframes enterZoom{ from{opacity:0; transform:translateY(10px) scale(.96)} to{opacity:1; transform:none} }
@keyframes enterRise{ from{opacity:0; transform:translateY(18px)} to{opacity:1; transform:none} }
@keyframes cardIn{ from{opacity:0; transform:perspective(900px) translateY(16px) rotateX(6deg)} to{opacity:1; transform:perspective(900px) translateY(0) rotateX(0)} }

/* 公告分页翻页动画 */
.ann-grid.flip-out{
  transform: perspective(1200px) rotateX(8deg) translateY(30px);
  opacity:0; filter:blur(10px);
  transition: transform .46s var(--ease-bouncy), opacity .46s var(--ease-out), filter .46s var(--ease-out);
  transform-origin: 50% 10%;
}

/* 背景轻微视差（滚动） */
.bg-sheen{ will-change: transform }

/* ========= 模态框（加入我们二次确认） ========= */
#modal-root{ position:fixed; inset:0; z-index:70; pointer-events:none }
.modal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.32);
  -webkit-backdrop-filter: blur(12px) saturate(150%); backdrop-filter: blur(12px) saturate(150%);
  opacity:0; transition:opacity .28s var(--ease-out);
}
.modal{
  position:fixed; left:50%; top:50%; transform:translate(-50%,-50%) scale(.96);
  background:var(--glass-strong); border:1px solid var(--stroke); border-radius:16px; box-shadow:var(--shadow);
  padding:18px; width:min(420px, calc(100% - 32px));
  opacity:0; transition: opacity .28s var(--ease-out), transform .28s var(--ease-out);
}
.modal h3{ margin:0 0 8px }
.modal p{ margin:0; color:var(--muted) }
.modal-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:14px }
.modal .btn{ border-radius:10px }
.modal .btn.primary{ background:linear-gradient(135deg, var(--brand), var(--brand-2)); color:#001018; border-color:transparent; font-weight:700 }
.modal.in{ opacity:1; transform:translate(-50%,-50%) scale(1) }
.modal-backdrop.in{ opacity:1 }
/* Join 页面：应用图标与标题对齐的小样式 */
.app-card .app-head{ display:flex; align-items:center; gap:10px; margin-bottom:8px }
.app-card .app-icon{
  width:36px; height:36px; border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  background: var(--glass-strong); border:1px solid var(--stroke);
}
.app-card .app-icon.tg{ background:linear-gradient(135deg,#17A9FD,#1D9BF0); color:white; border-color: transparent }
.app-card .app-icon.sig{ background:linear-gradient(135deg,#3A76F0,#0BA3FF); color:white; border-color: transparent }
